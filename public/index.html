<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Simple Simon</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!--Google Fonts -->

    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/simple_simon.css">

    <!-- I moved my JQuery up here because it said $ wasn't defined, when I left it with bootstrap down at the bottom -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

</head>

<body>

    <div class="container-fluid">

        <div class="row text-center">

            <h1>Play Simple Simon</h1>

        </div>

        <div class="row text-center">

            <div class="col-sm-12 col-md-12 col-lg-12" id="ss_containers">

                <div class="col-sm-12 col-md-12 col-lg-12" id="ss_container_top">

                    <button data-number = "0" class="simon_shape" id="simon_shape_1">0</button>

                    <button data-number = "1" class="simon_shape" id="simon_shape_2">1</button>

                </div>


                <div class="col-sm-12 col-md-12 col-lg-12" id="ss_container_bottom">

                    <button data-number = "2" class="simon_shape" id="simon_shape_3">2</button>

                    <button data-number = "3" class="simon_shape" id="simon_shape_4">3</button>

                </div>

            </div>

        </div>

    </div>

    <script>
    "use strict";

        var mouse_click = $(".simon_shape");

        var sequence = [];  

        var clickIndex = 0;                

        $(document).ready(function() {
            $("h1").click(function() {
                var ss_interval = setInterval(function(){
                    var random = Math.floor(Math.random()*4)
                    console.log(random);
                    sequence.push(random);
                    console.log(sequence);

                    //pass in the animate as a variable within the function
                    $(".simon_shape").eq(random).animate({
                        opacity: "0"
                    }, 750);
                    $(".simon_shape").eq(random).animate({
                        opacity: "1"
                    }, 750);   

                }, 2000);

                setTimeout(function() {
                    clearInterval(ss_interval);
                }, 10000);
            });
        });


        //user play function

        var user_play = function (event) {
            var simon_shape = $(this).data("number");
            console.log(simon_shape);

                    if (simon_shape ==  sequence[clickIndex]) {
                        clickIndex++;
                    

                        if (clickIndex == sequence.length) {
                            console.log("Winner!");
                            alert("Winner!");
                            clickIndex = 0;
                            location.reload(true);
                        }
                    } else {
                        console.log("Loser!");
                        alert("Loser!");
                        clickIndex = 0;
                        location.reload(true);
                    }
        };

        //event listener is "on" since Jquery is being used
        $(".simon_shape").on("click", user_play);


    </script>



<!-- Latest compiled and minified JavaScript/JQuery -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</body>
</html>